<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <div id="map-id" style="display: none;">map</div>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
    
            <meta name="viewport" content="width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <style>
                #map_1847de95be0bd1ebe87a3dd0366aead5 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>

            <style>html, body {
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
            }
            </style>

            <style>#map {
                position:absolute;
                top:0;
                bottom:0;
                right:0;
                left:0;
                }
            </style>

            <script>
                L_NO_TOUCH = false;
                L_DISABLE_3D = false;
            </script>

        
</head>
<body>
    
    
<style>
    /* 左侧悬浮窗样式 */
    #progress-panel {
        position: fixed;
        left: 20px;
        top: 50%;
        transform: translateY(-50%);
        width: 150px;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 8px;
        padding: 15px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        z-index: 1000;
        font-family: 'Microsoft YaHei', Arial, sans-serif;
    }
    
    #progress-panel h3 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 16px;
        color: #d32f2f;
        text-align: center;
    }
    
    #progress-info {
        margin-bottom: 15px;
        text-align: center;
    }
    
    #progress-bar {
        width: 100%;
        height: 8px;
        background: #e0e0e0;
        border-radius: 4px;
        margin: 10px 0;
        overflow: hidden;
    }
    
    #progress-fill {
        height: 100%;
        background: #d32f2f;
        width: 0%;
        transition: width 0.3s ease;
    }
    
    .control-btn {
        width: 100%;
        padding: 8px;
        margin: 5px 0;
        background: #d32f2f;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
    }
    
    .control-btn:hover {
        background: #b71c1c;
    }
    
    /* 顶部标志样式 */
    #header-banner {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: 60px;
        background: linear-gradient(135deg, #d32f2f 0%, #b71c1c 100%);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        z-index: 1001;
        font-family: 'Microsoft YaHei', Arial, sans-serif;
    }
    
    #header-banner h1 {
        margin: 0;
        font-size: 24px;
        font-weight: bold;
    }
    
    /* 右侧详情页样式 */
    #details-panel {
        position: fixed;
        right: -400px;
        top: 60px;
        bottom: 0;
        width: 400px;
        background: rgba(255, 255, 255, 0.95);
        box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
        z-index: 1000;
        transition: right 0.3s ease;
        padding: 20px;
        overflow-y: auto;
        font-family: 'Microsoft YaHei', Arial, sans-serif;
    }
    
    #details-panel.show {
        right: 0;
    }
    
    #details-panel h2 {
        margin-top: 0;
        color: #d32f2f;
        font-size: 20px;
    }
    
    #details-panel h3 {
        color: #757575;
        font-size: 16px;
        margin-top: 5px;
    }
    
    .detail-section {
        margin-bottom: 20px;
    }
    
    .detail-section h4 {
        color: #333;
        font-size: 14px;
        margin-bottom: 8px;
        padding-bottom: 5px;
        border-bottom: 1px solid #e0e0e0;
    }
    
    .detail-section p {
        line-height: 1.6;
        color: #555;
        margin: 0;
    }
    
    .close-btn {
        position: fixed;
        bottom: 20px;
        left: 20px;
        background: white;
        border: 1px solid #ccc;
        border-radius: 4px;
        width: 30px;
        height: 30px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1002;
        color: #333;
        font-size: 20px;
        line-height: 1;
        padding: 0;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }
    
    .close-btn:hover {
        opacity: 0.8;
    }
    
    /* 确保地图容器有足够的空间显示所有内容 */
    .map-container {
        position: relative;
        width: 100%;
        height: 100vh;
    }
    
    /* 音效控制样式 */
    #audio-control {
        margin-top: 15px;
        padding-top: 15px;
        border-top: 1px solid #e0e0e0;
    }
    
    #audio-btn {
        width: 100%;
        padding: 8px;
        background: #2196f3;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
    }
    
    #audio-btn:hover {
        background: #1976d2;
    }
    
    /* 调整地图容器位置，避免被UI元素遮挡 */
    .folium-map {
        top: 60px !important;
        height: calc(100% - 60px) !important;
    }
    
    /* 选中点发光效果 */
    .selected-marker {
        animation: glow 1.5s ease-in-out infinite alternate;
    }
    
    @keyframes glow {
        from {
            filter: drop-shadow(0 0 2px rgba(255, 255, 255, 0.8));
        }
        to {
            filter: drop-shadow(0 0 10px rgba(255, 0, 0, 0.8)) drop-shadow(0 0 20px rgba(255, 0, 0, 0.6));
        }
    }
</style>
    
<script>
    // 当前选中的节点索引
    let currentNodeIndex = 0;
    const totalNodes = 11;
    
    // 长征路线点数据
    const waypoints = [{"name": "瑞金", "location": [25.8856, 116.027], "description": "长征出发地", "introduction": "瑞金是中华苏维埃共和国临时中央政府所在地，被誉为红色故都、共和国摇篮。", "events": "1934年10月10日，中共中央、中革军委率中央红军主力从瑞金等地出发，开始长征。", "story": "1934年10月，由于第五次反\"围剿\"失败，中央红军被迫实行战略性转移。在瑞金，红军进行了充分的准备，包括人员、物资的集结和政治动员。红军将士们怀着对革命事业的坚定信念，踏上了艰苦卓绝的长征之路。", "image": "https://pic.rmb.bdstatic.com/bjh/news/e3b61520c2e4f516b1c4651f4691815d.jpeg"}, {"name": "雩都", "location": [25.9811, 115.4442], "description": "于都河渡河", "introduction": "雩都（今于都）是中央红军长征的第一渡，是红军离开中央苏区的最后一站。", "events": "1934年10月16日至19日，中央红军主力8.6万余人从于都河的8个渡口渡河，开始了著名的二万五千里长征。", "story": "在于都，当地群众积极支持红军，他们不仅提供了大量的船只，还帮助红军搭建浮桥。许多群众自发为红军战士送茶送水，甚至把自己的口粮拿出来支援红军。在群众的帮助下，红军成功渡过了于都河，开始了艰苦的长征历程。", "image": "https://img.zcool.cn/community/01b4d45d383265a8012193a3696d2e.jpg@1280w_1l_2o_100sh.jpg"}, {"name": "遵义", "location": [27.7172, 106.9271], "description": "遵义会议召开地", "introduction": "遵义是中国革命历史上的重要转折点，遵义会议确立了毛泽东在党中央和红军的领导地位。", "events": "1935年1月15日至17日，中共中央在遵义召开政治局扩大会议，确立了毛泽东在党中央和红军的领导地位。", "story": "遵义会议是中国共产党历史上一个生死攸关的转折点。会议集中解决了当时具有决定意义的军事和组织问题，结束了王明\"左\"倾教条主义在党中央的统治，确立了毛泽东在党中央和红军的领导地位。这次会议挽救了党、挽救了红军、挽救了中国革命，是党的历史上一个伟大的转折点。", "image": "https://pic.rmb.bdstatic.com/bjh/news/b3bd8b8d9bceb918e1421e11b91a8d83.jpeg"}, {"name": "赤水", "location": [28.5081, 105.7975], "description": "四渡赤水", "introduction": "赤水是红军长征中著名的四渡赤水战役发生地，是毛泽东军事指挥艺术的得意之笔。", "events": "1935年1月19日至3月22日，中央红军在毛泽东等指挥下，四渡赤水，巧妙地跳出了国民党军的包围圈。", "story": "四渡赤水战役是红军长征中最精彩的军事行动之一，也是毛泽东军事指挥艺术的得意之笔。在毛泽东的指挥下，红军采取灵活机动的战略战术，声东击西，迷惑敌人，成功地摆脱了国民党军的围追堵截，实现了战略转移的目标。", "image": "https://img.zcool.cn/community/01f02858a471e7a801219c77d2e322.jpg@1280w_1l_2o_100sh.jpg"}, {"name": "金沙江", "location": [27.1564, 100.2562], "description": "巧渡金沙江", "introduction": "金沙江是长江的上游，水流湍急，是红军长征中的一道天险。", "events": "1935年5月3日至9日，中央红军干部团在后有追兵的情况下，仅凭7只小船，用6天6夜时间巧渡金沙江。", "story": "金沙江战役是红军长征中的一次重要战役。红军先头部队化装成国民党军，智取了皎平渡，并控制了渡口。当地群众帮助红军仅用7只小船，在6天6夜时间里，将中央红军主力全部渡过了金沙江，成功地摆脱了国民党军的围追堵截。", "image": "https://pic.rmb.bdstatic.com/bjh/news/a6a3b39b0bbd5f2f1ce3d1b1f8e28d8e.jpeg"}, {"name": "大渡河", "location": [29.4333, 102.2167], "description": "强渡大渡河", "introduction": "大渡河是红军长征中的又一道天险，水流湍急，两岸悬崖峭壁。", "events": "1935年5月24日至25日，中央红军在安顺场强渡大渡河，十八勇士冒着敌人的枪林弹雨，成功突破天险。", "story": "强渡大渡河是红军长征中的一次勇敢壮举。在敌人的严密防守下，红军十八勇士在火力掩护下，乘坐木船强行渡河，成功地突破了敌人的防线。这次战役展现了红军战士不怕牺牲、英勇无畏的革命精神。", "image": "https://pic.rmb.bdstatic.com/bjh/news/a40e6c959663850777e278d9cf295be2.jpeg"}, {"name": "泸定桥", "location": [29.9428, 102.2956], "description": "飞夺泸定桥", "introduction": "泸定桥是一座铁索桥，横跨大渡河，是红军长征中的关键节点。", "events": "1935年5月29日，22名红军战士在火力掩护下，攀着铁索向对岸冲锋，最终夺下泸定桥。", "story": "飞夺泸定桥是红军长征中最惊险、最悲壮的战役之一。在敌人拆除了桥上的木板，只剩下13根铁索的情况下，22名红军战士手持冲锋枪，身背马刀，腰缠手榴弹，冒着敌人的枪林弹雨，攀着铁索向对岸冲锋。最终，红军成功地夺下了泸定桥，为中央红军北上打开了通道。", "image": "https://pic.rmb.bdstatic.com/bjh/news/35e4fbd5b33c4307160c507a8133afb1.jpeg"}, {"name": "夹金山", "location": [30.5, 102.6], "description": "翻越夹金山", "introduction": "夹金山是红军长征中翻越的第一座大雪山，海拔4000多米，山上终年积雪，空气稀薄。", "events": "1935年6月12日，中央红军先头部队翻越长征途中第一座大雪山——夹金山，山上终年积雪，空气稀薄。", "story": "翻越夹金山是红军长征中的一次艰苦卓绝的考验。山上终年积雪，空气稀薄，气温极低，许多红军战士因为严寒、缺氧而牺牲。但红军战士们发扬了不怕苦、不怕死的革命精神，互相帮助，互相鼓励，最终成功地翻越了夹金山。", "image": "https://img.zcool.cn/community/01611d58a471e9a801219c77557881.jpg@1280w_1l_2o_100sh.jpg"}, {"name": "懋功", "location": [31.5543, 102.4531], "description": "与红四方面军会师", "introduction": "懋功是中央红军与红四方面军会师的地点，标志着红军力量的壮大。", "events": "1935年6月18日，中央红军与红四方面军在懋功会师，两军将士欢欣鼓舞，庆祝胜利会师。", "story": "懋功会师是红军长征中的一个重要里程碑。中央红军与红四方面军的胜利会师，壮大了红军的力量，增强了红军的信心。两军将士互相学习，互相帮助，结下了深深的革命友谊。", "image": "https://img.zcool.cn/community/015c5558a471e8a801219c779f01fc.jpg@1280w_1l_2o_100sh.jpg"}, {"name": "松潘草地", "location": [32.6047, 103.6553], "description": "过草地", "introduction": "松潘草地是红军长征中最艰苦的路段之一，到处是沼泽泥潭，一不小心就会陷进去。", "events": "1935年8月21日至26日，中央红军过松潘草地，草地茫茫无边，到处是沼泽泥潭，不少红军战士陷入泥潭牺牲。", "story": "过草地是红军长征中最艰苦的历程之一。草地茫茫无边，到处是沼泽泥潭，一不小心就会陷进去，而且没有食物，没有水，许多红军战士因为饥饿、寒冷、疾病而牺牲。但红军战士们发扬了革命乐观主义精神，互相帮助，互相鼓励，最终成功地走出了草地。", "image": "https://pic.rmb.bdstatic.com/bjh/news/ce287241f06b1665e6b1fc778a7fb59d.jpeg"}, {"name": "吴起镇", "location": [36.92785, 108.17611], "description": "长征终点", "introduction": "吴起镇是中央红军长征的终点，标志着长征的胜利结束。", "events": "1935年10月19日，中央红军到达陕北吴起镇，与陕北红军会师，胜利完成了二万五千里长征。", "story": "吴起镇会师是红军长征胜利的标志。经过一年多的艰苦跋涉，中央红军终于到达了陕北，与陕北红军胜利会师。长征的胜利，保存了党和红军的基干力量，打开了中国革命的新局面。", "image": "https://pic.rmb.bdstatic.com/bjh/news/18afdc74229304940c6cf7756957d376.jpeg"}];
    
    // 添加左侧悬浮窗
    const progressPanel = document.createElement('div');
    progressPanel.id = 'progress-panel';
    progressPanel.innerHTML = `
        <h3>长征进度</h3>
        <div id="progress-info">
            <div>第 <span id="current-step">1</span> / <span id="total-steps">${totalNodes}</span> 站</div>
            <div id="progress-bar"><div id="progress-fill"></div></div>
            <div id="current-location">${waypoints[0].name}</div>
        </div>
        <button id="prev-btn" class="control-btn" disabled>上一站</button>
        <button id="next-btn" class="control-btn">下一站</button>
        <div id="audio-control">
            <button id="audio-btn">🔊 播放音效</button>
        </div>
    `;
    document.body.appendChild(progressPanel);
    
    // 添加顶部标志
    const headerBanner = document.createElement('div');
    headerBanner.id = 'header-banner';
    headerBanner.innerHTML = '<h1>红军长征路线图</h1>';
    document.body.insertBefore(headerBanner, document.body.firstChild);
    
    // 添加右侧详情页
    const detailsPanel = document.createElement('div');
    detailsPanel.id = 'details-panel';
    detailsPanel.innerHTML = `
        <!-- 关闭按钮 - 确保样式正确 -->
        <button class="close-btn" onclick="closeDetails()" style="
            position: absolute;
            top: 10px;
            right: 10px;
            background: white;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 30px;
            height: 30px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1002;
            color: #333;
            font-size: 20px;
            line-height: 1;
            padding: 0;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        ">×</button>
        <h2 id="detail-name">${waypoints[0].name}</h2>
        <h3 id="detail-description">${waypoints[0].description}</h3>
        
        <!-- 地点简介 -->
        <div class="detail-section">
            <h4>地点简介</h4>
            <p id="detail-introduction">${waypoints[0].introduction}</p>
        </div>
        
        <!-- 主要事件 -->
        <div class="detail-section">
            <h4>主要事件</h4>
            <p id="detail-events">${waypoints[0].events}</p>
        </div>
        
        <!-- 详细故事 -->
        <div class="detail-section">
            <h4>详细故事</h4>
            <p id="detail-story">${waypoints[0].story}</p>
        </div>
    `;
    document.body.appendChild(detailsPanel);
    
    // 创建Web Audio API音效系统（完全不依赖外部资源）
    class MarchingSoundEffect {
        constructor() {
            this.audioContext = null;
            this.isPlaying = false;
            this.loopInterval = null;
        }
        
        // 初始化音频上下文
        init() {
            if (!this.audioContext) {
                try {
                    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    return true;
                } catch (e) {
                    console.log('无法初始化音频上下文:', e);
                    return false;
                }
            }
            return true;
        }
        
        // 播放行军风格的音效
        playMarchingSound() {
            if (!this.init()) return false;
            
            // 如果音频上下文被暂停，恢复它
            if (this.audioContext.state === 'suspended') {
                this.audioContext.resume();
            }
            
            // 创建鼓点音效
            this.createDrumBeat();
            return true;
        }
        
        // 创建鼓点音效
        createDrumBeat() {
            // 创建一个简单的两拍子鼓点
            const now = this.audioContext.currentTime;
            
            // 低音鼓
            this.playDrumSound(now, 40, 0.2, 0.15);
            this.playDrumSound(now + 0.5, 40, 0.2, 0.15);
            
            // 军鼓
            this.playSnareSound(now + 0.25, 150, 0.1, 0.1);
            this.playSnareSound(now + 0.75, 150, 0.1, 0.1);
        }
        
        // 播放鼓声
        playDrumSound(startTime, frequency, duration, volume) {
            const oscillator = this.audioContext.createOscillator();
            const gainNode = this.audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(this.audioContext.destination);
            
            oscillator.type = 'sine';
            oscillator.frequency.value = frequency;
            
            gainNode.gain.setValueAtTime(0, startTime);
            gainNode.gain.linearRampToValueAtTime(volume, startTime + 0.01);
            gainNode.gain.exponentialRampToValueAtTime(0.001, startTime + duration);
            
            oscillator.start(startTime);
            oscillator.stop(startTime + duration);
        }
        
        // 播放军鼓声音
        playSnareSound(startTime, frequency, duration, volume) {
            const oscillator = this.audioContext.createOscillator();
            const gainNode = this.audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(this.audioContext.destination);
            
            oscillator.type = 'square';
            oscillator.frequency.value = frequency;
            
            // 快速变化频率模拟军鼓声音
            oscillator.frequency.exponentialRampToValueAtTime(frequency * 0.5, startTime + duration * 0.3);
            
            gainNode.gain.setValueAtTime(0, startTime);
            gainNode.gain.linearRampToValueAtTime(volume, startTime + 0.005);
            gainNode.gain.exponentialRampToValueAtTime(0.001, startTime + duration);
            
            oscillator.start(startTime);
            oscillator.stop(startTime + duration);
        }
        
        // 播放胜利号角音效
        playFanfare() {
            if (!this.init()) return false;
            
            if (this.audioContext.state === 'suspended') {
                this.audioContext.resume();
            }
            
            const now = this.audioContext.currentTime;
            const notes = [261.63, 329.63, 392.00, 523.25]; // C4, E4, G4, C5
            const noteDuration = 0.3;
            
            notes.forEach((note, index) => {
                this.playTrumpetNote(now + index * noteDuration, note, noteDuration * 0.9);
            });
            
            return true;
        }
        
        // 播放小号音符
        playTrumpetNote(startTime, frequency, duration) {
            const oscillator = this.audioContext.createOscillator();
            const gainNode = this.audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(this.audioContext.destination);
            
            oscillator.type = 'triangle';
            oscillator.frequency.value = frequency;
            
            // 颤音效果
            const vibrato = this.audioContext.createOscillator();
            const vibratoGain = this.audioContext.createGain();
            
            vibrato.type = 'sine';
            vibrato.frequency.value = 5;
            vibratoGain.gain.value = 2;
            
            vibrato.connect(vibratoGain);
            vibratoGain.connect(oscillator.frequency);
            
            gainNode.gain.setValueAtTime(0, startTime);
            gainNode.gain.linearRampToValueAtTime(0.1, startTime + 0.05);
            gainNode.gain.exponentialRampToValueAtTime(0.001, startTime + duration);
            
            oscillator.start(startTime);
            oscillator.stop(startTime + duration);
            vibrato.start(startTime);
            vibrato.stop(startTime + duration);
        }
    }
    
    // 创建音效实例
    const soundEffect = new MarchingSoundEffect();
    
    // 封装播放音效函数
    window.playSoundEffect = function() {
        // 随机播放行军鼓或胜利号角音效
        const success = Math.random() > 0.5 ? 
            soundEffect.playMarchingSound() : 
            soundEffect.playFanfare();
        
        // 提供视觉反馈
        const audioBtn = document.getElementById('audio-btn');
        const originalText = audioBtn.textContent;
        
        if (success) {
            audioBtn.textContent = '🎵 音效已播放';
        } else {
            audioBtn.textContent = '🔊 浏览器不支持音效';
        }
        
        setTimeout(() => {
            audioBtn.textContent = originalText;
        }, 1500);
        
        return success;
    };
    
    // 获取地图对象的辅助函数
    function getMap() {
        // 查找所有folium地图实例
        for (let key in window) {
            if (window.hasOwnProperty(key) && key.startsWith('map_') && window[key] instanceof L.Map) {
                return window[key];
            }
        }
        return null;
    }
    
    // 更新选中点的发光效果
    function updateMarkerGlow(index) {
        // 移除所有标记的发光效果
        const markers = document.querySelectorAll('.leaflet-marker-icon');
        markers.forEach(marker => marker.classList.remove('selected-marker'));
        
        // 为当前选中的标记添加发光效果
        if (markers.length > index && index >= 0) {
            markers[index].classList.add('selected-marker');
        }
    }
    
    // 更新进度显示
    function updateProgress(index) {
        currentNodeIndex = index;
        const progressPercent = ((index + 1) / totalNodes) * 100;
        
        document.getElementById('current-step').textContent = index + 1;
        document.getElementById('progress-fill').style.width = `${progressPercent}%`;
        document.getElementById('current-location').textContent = waypoints[index].name;
        
        // 更新按钮状态
        document.getElementById('prev-btn').disabled = index === 0;
        document.getElementById('next-btn').disabled = index === totalNodes - 1;
        
        // 定义需要高亮的关键词列表
        const keywords = ['红军', '长征', '毛泽东', '瑞金', '遵义', '赤水', '雪山', '草地', '吴起镇', '会师', '毛泽东', '周恩来', '朱德'];
        
        // 高亮关键词的函数
        function highlightKeywords(text) {
            let highlightedText = text;
            keywords.forEach(keyword => {
                const regex = new RegExp(`(${keyword})`, 'g');
                highlightedText = highlightedText.replace(regex, '<span style="color: #d32f2f; font-weight: bold;">$1</span>');
            });
            return highlightedText;
        }
        
        // 更新详情面板，对内容进行关键词高亮处理
        document.getElementById('detail-name').textContent = waypoints[index].name;
        document.getElementById('detail-description').textContent = waypoints[index].description;
        document.getElementById('detail-introduction').innerHTML = highlightKeywords(waypoints[index].introduction);
        document.getElementById('detail-events').innerHTML = highlightKeywords(waypoints[index].events);
        document.getElementById('detail-story').innerHTML = highlightKeywords(waypoints[index].story);
        
        // 居中显示当前点并设置缩放级别为10km视图（约12级）
        const map = getMap();
        if (map) {
            map.setView(waypoints[index].location, 11); // 从12调整为11，显示约20km视图范围
        }
        
        // 更新标记发光效果
        updateMarkerGlow(index);
        
        // 自动触发标记的弹出浮窗
        openMarkerPopup(index);
    }
    
    // 打开指定标记的弹出浮窗
    function openMarkerPopup(index) {
        const map = getMap();
        if (!map) return;
        
        // 查找对应索引的标记
        const markers = document.querySelectorAll('.leaflet-marker-icon');
        if (markers.length > index && index >= 0) {
            // 触发点击事件以打开浮窗
            markers[index].click();
        }
    }
    
    // 增强发光动效
    function updateMarkerGlow(index) {
        // 移除所有标记的发光效果
        const markers = document.querySelectorAll('.leaflet-marker-icon');
        markers.forEach(marker => marker.classList.remove('selected-marker'));
        
        // 为当前选中的标记添加发光效果
        if (markers.length > index && index >= 0) {
            markers[index].classList.add('selected-marker');
        }
    }
    
    // 添加CSS动画样式
    function addWalkingAnimation() {
        const style = document.createElement('style');
        style.textContent = `
            /* 线段动画样式 */
            .animated-path {
                stroke-dasharray: 15, 5;
                stroke-linecap: round;
                animation: dash 30s linear infinite;
            }
            
            @keyframes dash {
                to {
                    stroke-dashoffset: -1000;
                }
            }
        `;
        document.head.appendChild(style);
    }
    
    // 打开详情面板
    function openDetails() {
        // 确保detailsPanel变量已正确初始化
        const detailsPanel = document.getElementById('details-panel');
        if (detailsPanel) {
            detailsPanel.classList.add('show');
        }
    }
    
    // 关闭详情面板
    function closeDetails() {
        const detailsPanel = document.getElementById('details-panel');
        if (detailsPanel) {
            detailsPanel.classList.remove('show');
        }
    }
    
    // 为线段添加动画效果
    function animatePaths() {
        // 查找地图上的所有PolyLine元素
        const pathElements = document.querySelectorAll('svg path.leaflet-interactive');
        pathElements.forEach(path => {
            path.classList.add('animated-path');
        });
    }
    
    // 确保closeDetails函数在全局作用域可用
    window.closeDetails = closeDetails;
    
    // 根据节点索引打开详情面板
    function openDetailsForNode(index) {
        updateProgress(index);
        openDetails();
    }
    
    // 添加按钮事件监听
    document.getElementById('prev-btn').addEventListener('click', function() {
        if (currentNodeIndex > 0) {
            updateProgress(currentNodeIndex - 1);
            // 不再自动打开详情面板
        }
    });
    
    document.getElementById('next-btn').addEventListener('click', function() {
        if (currentNodeIndex < totalNodes - 1) {
            updateProgress(currentNodeIndex + 1);
            // 不再自动打开详情面板
        }
    });
    
    // 音效控制 - 使用Web Audio API生成的内置音效
    document.getElementById('audio-btn').addEventListener('click', function() {
        // 播放音效（行军鼓或胜利号角随机选择）
        playSoundEffect();
    });
    
    // 为上一站/下一站按钮添加音效
    document.getElementById('prev-btn').addEventListener('click', function() {
        if (currentNodeIndex > 0) {
            // 播放短音效
            playSoundEffect();
        }
    });
    
    document.getElementById('next-btn').addEventListener('click', function() {
        if (currentNodeIndex < totalNodes - 1) {
            // 播放短音效
            playSoundEffect();
        }
    });
    
    // 添加行走动画样式
    addWalkingAnimation();
    
    // 为线段添加动画效果
    setTimeout(animatePaths, 2000);
    
    // 添加可拖拽的小士兵
    addSoldier();
    
    // 初始化进度
    updateProgress(0);
    
    // 为地图上的标记添加点击事件
    // 注意：这部分需要在地图完全加载后执行
    setTimeout(function() {
        const markers = document.querySelectorAll('.leaflet-marker-icon');
        markers.forEach((marker, index) => {
            marker.addEventListener('click', function(e) {
                // 阻止事件冒泡，避免循环调用
                e.stopPropagation();
                updateProgress(index);
                // 调用openDetails函数打开详情页
                openDetails();
                // 确保浮窗能正确弹出
                if (marker._icon && marker._icon.parentNode && marker._icon.parentNode._popup) {
                    marker._icon.parentNode.openPopup();
                }
            });
        });
    }, 1000);
    
    // 添加CSS样式使详情面板可见
    setTimeout(function() {
        const style = document.createElement('style');
        style.textContent = `
            #details-panel.show {
                right: 0;
            }
            
            /* 红军小人样式 */
            #soldier {
                position: absolute;
                width: 40px;
                height: 60px;
                cursor: move;
                z-index: 999;
                transform-origin: center bottom;
                pointer-events: all;
            }
            
            #soldier.dragging {
                opacity: 0.8;
                transform: scale(1.1);
            }
            
            /* 红军小人行走动画 */
            @keyframes walk {
                0%, 100% {
                    transform: translateY(0) rotate(0deg);
                }
                25% {
                    transform: translateY(-5px) rotate(-3deg);
                }
                50% {
                    transform: translateY(0) rotate(3deg);
                }
                75% {
                    transform: translateY(-5px) rotate(-2deg);
                }
            }
            
            #soldier.walking {
                animation: walk 0.6s infinite ease-in-out;
            }
            
            /* 红军小人组件 */
            .soldier-body {
                position: relative;
                width: 40px;
                height: 60px;
            }
            
            .soldier-head {
                position: absolute;
                top: 0;
                left: 50%;
                transform: translateX(-50%);
                width: 24px;
                height: 24px;
                background-color: #f5d0c5;
                border-radius: 50%;
                border: 2px solid #000;
            }
            
            .soldier-uniform {
                position: absolute;
                top: 24px;
                left: 50%;
                transform: translateX(-50%);
                width: 30px;
                height: 20px;
                background-color: #d32f2f;
                border: 2px solid #000;
            }
            
            .soldier-legs {
                position: absolute;
                top: 44px;
                left: 50%;
                transform: translateX(-50%);
                width: 20px;
                height: 16px;
                display: flex;
                justify-content: space-between;
            }
            
            .soldier-left-leg,
            .soldier-right-leg {
                width: 6px;
                height: 16px;
                background-color: #212121;
                border: 1px solid #000;
                position: relative;
            }
            
            .soldier-arms {
                position: absolute;
                top: 28px;
                left: 50%;
                transform: translateX(-50%);
                width: 40px;
                height: 8px;
                display: flex;
                justify-content: space-between;
            }
            
            .soldier-left-arm,
            .soldier-right-arm {
                width: 12px;
                height: 8px;
                background-color: #d32f2f;
                border: 1px solid #000;
            }
            
            /* 行走时的手脚动画 */
            #soldier.walking .soldier-left-leg {
                animation: leg-move 0.6s infinite ease-in-out;
            }
            
            #soldier.walking .soldier-right-leg {
                animation: leg-move 0.6s infinite ease-in-out 0.3s;
            }
            
            #soldier.walking .soldier-left-arm {
                animation: arm-move 0.6s infinite ease-in-out 0.3s;
            }
            
            #soldier.walking .soldier-right-arm {
                animation: arm-move 0.6s infinite ease-in-out;
            }
            
            @keyframes leg-move {
                0%, 100% {
                    transform: rotate(0deg);
                }
                50% {
                    transform: rotate(-20deg);
                }
            }
            
            @keyframes arm-move {
                0%, 100% {
                    transform: rotate(0deg);
                }
                50% {
                    transform: rotate(20deg);
                }
            }
        `;
        document.head.appendChild(style);
    }, 500);
    
    // 添加可拖拽的小人
    function addSoldier() {
        const soldier = document.createElement('div');
        soldier.id = 'soldier';
        
        // 创建带有手和脚的小人HTML结构
        soldier.innerHTML = `
            <div class="soldier-body">
                <div class="soldier-head"></div>
                <div class="soldier-uniform"></div>
                <div class="soldier-arms">
                    <div class="soldier-left-arm"></div>
                    <div class="soldier-right-arm"></div>
                </div>
                <div class="soldier-legs">
                    <div class="soldier-left-leg"></div>
                    <div class="soldier-right-leg"></div>
                </div>
            </div>
        `;
        
        // 设置初始位置
        soldier.style.left = '60px';
        soldier.style.bottom = '60px';
        
        document.body.appendChild(soldier);
        
        let isDragging = false;
        let currentX, currentY, initialX, initialY;
        let pathIndex = -1;
        let isWalking = false;
        
        // 获取所有路线元素
        function getPathElements() {
            return document.querySelectorAll('svg path.leaflet-interactive');
        }
        
        // 检查点是否在路径上
        function isPointOnPath(x, y, pathElement) {
            // 获取SVG元素
            const svgElement = pathElement.closest('svg');
            if (!svgElement) return false;
            
            const svgRect = svgElement.getBoundingClientRect();
            
            // 检查点击位置是否在SVG矩形内
            if (x < svgRect.left - 10 || x > svgRect.right + 10 || y < svgRect.top - 10 || y > svgRect.bottom + 10) {
                return false;
            }
            
            try {
                // 获取SVG的CTM(Current Transformation Matrix)以将屏幕坐标转换为SVG坐标
                const point = svgElement.createSVGPoint();
                point.x = x;
                point.y = y;
                
                // 获取SVG元素的坐标系中的点
                const transformedPoint = point.matrixTransform(svgElement.getScreenCTM().inverse());
                
                // 使用isPointInStroke和isPointInFill来检测点是否在线上
                const isInStroke = pathElement.isPointInStroke(transformedPoint);
                const isInFill = pathElement.isPointInFill(transformedPoint);
                
                // 使用getPointAtLength进行更精确的检测
                const pathLength = pathElement.getTotalLength();
                
                // 增加采样密度以提高检测精度
                for (let i = 0; i <= pathLength; i += 1) {
                    const pathPoint = pathElement.getPointAtLength(i);
                    const distance = Math.sqrt(
                        Math.pow(transformedPoint.x - pathPoint.x, 2) + 
                        Math.pow(transformedPoint.y - pathPoint.y, 2)
                    );
                    
                    // 扩大检测范围到20像素以提高成功率
                    if (distance < 20) {
                        return true;
                    }
                }
                
                return isInStroke || isInFill;
            } catch (error) {
                console.error('检测路径点出错:', error);
                return false;
            }
        }
        
        // 找到小士兵所在的路径索引
        function findPathIndex(x, y) {
            const paths = getPathElements();
            for (let i = 0; i < paths.length; i++) {
                // 直接传递绝对坐标给isPointOnPath
                if (isPointOnPath(x, y, paths[i])) {
                    console.log('找到路径索引:', i);
                    return i;
                }
            }
            console.log('未找到路径');
            return -1;
        }
        
        // 找到点在路径上的最近位置，并返回进度值(0-1)
        function findClosestPointOnPath(x, y, pathElement) {
            const svgElement = pathElement.closest('svg');
            if (!svgElement) return -1;
            
            try {
                const point = svgElement.createSVGPoint();
                point.x = x;
                point.y = y;
                
                const transformedPoint = point.matrixTransform(svgElement.getScreenCTM().inverse());
                const pathLength = pathElement.getTotalLength();
                
                let minDistance = Infinity;
                let closestPointIndex = 0;
                
                // 在路径上采样更多点以找到最近点
                for (let i = 0; i <= pathLength; i += 5) {
                    const pathPoint = pathElement.getPointAtLength(i);
                    const distance = Math.sqrt(
                        Math.pow(transformedPoint.x - pathPoint.x, 2) + 
                        Math.pow(transformedPoint.y - pathPoint.y, 2)
                    );
                    
                    if (distance < minDistance) {
                        minDistance = distance;
                        closestPointIndex = i;
                    }
                }
                
                // 只有当最近点足够近时才返回进度值
                if (minDistance < 30) {
                    return closestPointIndex / pathLength;
                }
                
                return -1;
            } catch (error) {
                console.error('计算路径最近点出错:', error);
                return -1;
            }
        }
        
        // 沿路径移动小人
    function moveAlongPath(pathIndex, duration = 20000, startPosition = null) { // 减慢速度为20秒
        const paths = getPathElements();
        if (pathIndex < 0 || pathIndex >= paths.length) return;
        
        // 开始行走动画
        isWalking = true;
        soldier.classList.add('walking');
        
        const path = paths[pathIndex];
        const pathLength = path.getTotalLength();
        let startTime = null;
        let currentProgress = 0; // 保存当前行走进度
        
        // 如果提供了起始位置（拖拽释放的位置），计算在路径上的进度
        if (startPosition) {
            const progress = findClosestPointOnPath(startPosition.x, startPosition.y, path);
            if (progress >= 0) {
                currentProgress = progress;
                console.log('从拖拽位置开始移动，进度:', currentProgress);
            }
        }
        
        function move(timestamp) {
            if (!startTime) startTime = timestamp;
            const progress = currentProgress + (timestamp - startTime) / duration;
            
            if (progress < 1 && isWalking) {
                const point = path.getPointAtLength(progress * pathLength);
                
                // 获取地图容器位置
                const mapContainer = document.querySelector('.map-container, .folium-map') || document.querySelector('.folium-map');
                if (!mapContainer) {
                    console.error('地图容器未找到');
                    return;
                }
                
                const mapRect = mapContainer.getBoundingClientRect();
                const svgElement = path.closest('svg');
                
                if (svgElement) {
                    const svgRect = svgElement.getBoundingClientRect();
                    
                    // 修复计算逻辑，确保小人准确沿着路线行走
                    const mapX = point.x + svgRect.left - mapRect.left - 20; // 减去小人宽度的一半使其居中
                    const mapY = point.y + svgRect.top - mapRect.top - 28; // 调整垂直位置，确保脚踩在线上
                    
                    // 确保位置在合理范围内，防止小人消失
                    const containerWidth = mapContainer.offsetWidth;
                    const containerHeight = mapContainer.offsetHeight;
                    const soldierWidth = 40;
                    const soldierHeight = 60;
                    
                    // 限制小人在地图容器内
                    const safeX = Math.max(0, Math.min(mapX, containerWidth - soldierWidth));
                    const safeY = Math.max(0, Math.min(mapY, containerHeight - soldierHeight));
                    
                    // 设置小人位置（相对于地图容器）
                    soldier.style.position = 'absolute';
                    soldier.style.left = safeX + 'px';
                    soldier.style.top = safeY + 'px';
                    soldier.style.bottom = 'auto';
                    
                    // 确保小人始终显示在地图上方
                    soldier.style.zIndex = '999';
                    
                    // 确保小人元素是可见的
                    soldier.style.display = 'block';
                }
                
                // 确保动画持续进行
                if (typeof window.requestAnimationFrame === 'function') {
                    requestAnimationFrame(move);
                } else {
                    // 降级方案 - 使用setTimeout作为后备
                    setTimeout(() => move(Date.now()), 16); // 约60fps
                }
            } else {
                // 移动结束
                isWalking = false;
                soldier.classList.remove('walking');
                
                // 移动到下一站
                currentNodeIndex = Math.min(currentNodeIndex + 1, totalNodes - 1);
                updateProgress(currentNodeIndex);
                
                // 检查是否到达终点
                if (currentNodeIndex >= totalNodes - 1) {
                    // 延迟3秒后返回界面左下方
                    setTimeout(() => {
                        // 重置位置到界面左下方
                        resetSoldierPosition();
                    }, 3000);
                }
            }
        }
        
        // 确保动画开始，并重置startTime确保从路径起点开始
        startTime = null;
        if (typeof window.requestAnimationFrame === 'function') {
            requestAnimationFrame(move);
        } else {
            // 降级方案
            move(Date.now());
        }
        console.log('开始沿路径移动小人，路径索引:', pathIndex);
    }
    
    // 重置小人到界面左下方
    function resetSoldierPosition() {
        // 确保地图容器存在
        const mapContainer = document.querySelector('.map-container, .folium-map') || document.querySelector('.folium-map');
        if (!mapContainer) {
            console.error('地图容器未找到');
            return;
        }
        
        // 停止任何行走动画
        isWalking = false;
        soldier.classList.remove('walking');
        
        // 重置到界面左下方，使用相对定位以避免受到地图缩放影响
        soldier.style.position = 'absolute';
        soldier.style.left = '60px';
        soldier.style.bottom = '60px';
        soldier.style.top = 'auto';
        
        // 确保小人可见
        soldier.style.zIndex = '999';
        soldier.style.display = 'block';
        
        // 重置路径索引
        pathIndex = -1;
        
        console.log('小人已重置到界面左下方');
    }
        
        // 鼠标按下事件
        soldier.addEventListener('mousedown', function(e) {
            // 停止行走动画
            if (isWalking) {
                isWalking = false;
                soldier.classList.remove('walking');
            }
            
            initialX = e.clientX;
            initialY = e.clientY;
            isDragging = true;
            soldier.classList.add('dragging');
            
            // 改变为固定定位以便拖拽
            soldier.style.position = 'fixed';
        });
        
        // 鼠标移动事件
        document.addEventListener('mousemove', function(e) {
            if (isDragging) {
                e.preventDefault();
                currentX = e.clientX - initialX;
                currentY = e.clientY - initialY;
                initialX = e.clientX;
                initialY = e.clientY;
                
                const newLeft = parseInt(soldier.style.left || '60px') + currentX;
                const newBottom = parseInt(soldier.style.bottom || '60px') - currentY;
                
                // 限制在视口内
                if (newLeft > 0 && newLeft < window.innerWidth - 40) {
                    soldier.style.left = newLeft + 'px';
                }
                if (newBottom > 0 && newBottom < window.innerHeight - 40) {
                    soldier.style.bottom = newBottom + 'px';
                }
            }
        });
        
        // 鼠标释放事件
        document.addEventListener('mouseup', function() {
            if (isDragging) {
                isDragging = false;
                soldier.classList.remove('dragging');
                
                // 获取小人中心点坐标
                const rect = soldier.getBoundingClientRect();
                const x = rect.left + rect.width / 2;
                const y = rect.top + rect.height / 2;
                
                // 寻找所有路径中最近的点，无论是否在路径上
                let closestPathIndex = -1;
                let closestProgress = -1;
                let minDistance = Infinity;
                const paths = getPathElements();
                
                // 遍历所有路径找到最近的点
                for (let i = 0; i < paths.length; i++) {
                    const path = paths[i];
                    const svgElement = path.closest('svg');
                    if (!svgElement) continue;
                    
                    try {
                        const point = svgElement.createSVGPoint();
                        point.x = x;
                        point.y = y;
                        
                        const transformedPoint = point.matrixTransform(svgElement.getScreenCTM().inverse());
                        const pathLength = path.getTotalLength();
                        let pathMinDistance = Infinity;
                        let closestPointIndex = 0;
                        
                        // 在路径上采样更多点以找到最近点
                        for (let j = 0; j <= pathLength; j += 2) { // 增加采样密度
                            const pathPoint = path.getPointAtLength(j);
                            const distance = Math.sqrt(
                                Math.pow(transformedPoint.x - pathPoint.x, 2) + 
                                Math.pow(transformedPoint.y - pathPoint.y, 2)
                            );
                            
                            if (distance < pathMinDistance) {
                                pathMinDistance = distance;
                                closestPointIndex = j;
                            }
                        }
                        
                        // 找到此路径上的最近点
                        if (pathMinDistance < minDistance) {
                            minDistance = pathMinDistance;
                            closestPathIndex = i;
                            closestProgress = closestPointIndex / pathLength;
                        }
                    } catch (error) {
                        console.error('计算路径最近点出错:', error);
                    }
                }
                
                // 如果找到足够近的路径（距离阈值设为60像素）
                if (closestPathIndex !== -1 && minDistance < 60) {
                    pathIndex = closestPathIndex;
                    
                    // 获取对应的路径元素
                    const path = paths[pathIndex];
                    
                    // 将小人位置转换为相对于地图容器的坐标
                    const mapContainer = document.querySelector('.map-container, .folium-map') || document.querySelector('.folium-map');
                    if (mapContainer) {
                        const mapRect = mapContainer.getBoundingClientRect();
                        const svgElement = path.closest('svg');
                        
                        if (svgElement) {
                            const svgRect = svgElement.getBoundingClientRect();
                            
                            // 立即将小人定位到路径上的精确位置
                            const point = path.getPointAtLength(closestProgress * path.getTotalLength());
                            const mapX = point.x + svgRect.left - mapRect.left - 20;
                            const mapY = point.y + svgRect.top - mapRect.top - 28;
                            
                            // 设置位置
                            soldier.style.position = 'absolute';
                            soldier.style.left = mapX + 'px';
                            soldier.style.top = mapY + 'px';
                            soldier.style.bottom = 'auto';
                            soldier.style.zIndex = '999';
                            soldier.style.display = 'block';
                            
                            // 从该位置开始沿路径移动
                            moveAlongPath(pathIndex, 20000, {x: mapX + 20, y: mapY + 28});
                            playSoundEffect();
                        }
                    }
                } else {
                    // 如果不在任何路线附近，确保小人不会消失
                    soldier.style.display = 'block';
                    soldier.style.zIndex = '999';
                }
            }
        });
        
        // 监听地图拖动事件，确保小人在行走时不受影响
        const map = getMap();
        if (map) {
            map.on('dragstart', function() {
                if (isWalking) {
                    // 保存当前位置
                    const rect = soldier.getBoundingClientRect();
                    const mapContainer = document.querySelector('.map-container, .folium-map');
                    const mapRect = mapContainer.getBoundingClientRect();
                    
                    // 保存当前进度
                    if (startTime) {
                        const elapsedTime = Date.now() - startTime;
                        currentProgress = Math.min(elapsedTime / duration, 1);
                    }
                    
                    // 转换为相对于地图的位置
                    soldier.style.position = 'absolute';
                    soldier.style.left = (rect.left - mapRect.left) + 'px';
                    soldier.style.top = (rect.top - mapRect.top) + 'px';
                    soldier.style.bottom = 'auto';
                }
            });
            
            map.on('dragend', function() {
                if (isWalking) {
                    // 继续行走动画，从保存的进度继续
                    if (pathIndex !== -1) {
                        // 重置startTime但保留进度
                        startTime = null;
                        if (typeof window.requestAnimationFrame === 'function') {
                            requestAnimationFrame(move);
                        } else {
                            move(Date.now());
                        }
                    }
                }
            });
        }
    }
</script>
    
            <div class="folium-map" id="map_1847de95be0bd1ebe87a3dd0366aead5" ></div>
        
</body>
<script>
    
    
            var map_1847de95be0bd1ebe87a3dd0366aead5 = L.map(
                "map_1847de95be0bd1ebe87a3dd0366aead5",
                {
                    center: [25.8856, 116.027],
                    crs: L.CRS.EPSG3857,
                    ...{
  "zoom": 8,
  "zoomControl": true,
  "preferCanvas": false,
}

                }
            );
            L.control.scale().addTo(map_1847de95be0bd1ebe87a3dd0366aead5);

            

        
    
            var tile_layer_db4be76dac93890fd37dfe74b927defb = L.tileLayer(
                "https://tile.openstreetmap.org/{z}/{x}/{y}.png",
                {
  "minZoom": 0,
  "maxZoom": 19,
  "maxNativeZoom": 19,
  "noWrap": false,
  "attribution": "\u0026copy; \u003ca href=\"https://www.openstreetmap.org/copyright\"\u003eOpenStreetMap\u003c/a\u003e contributors",
  "subdomains": "abc",
  "detectRetina": false,
  "tms": false,
  "opacity": 1,
}

            );
        
    
            tile_layer_db4be76dac93890fd37dfe74b927defb.addTo(map_1847de95be0bd1ebe87a3dd0366aead5);
        
    
            var poly_line_c1b8d57330be3143bab4a45f9badfeb0 = L.polyline(
                [[25.8856, 116.027], [25.925, 115.87], [25.9811, 115.4442], [25.9, 114.9], [25.6, 113.9], [26.0, 113.0], [26.5, 111.8], [27.1, 109.8], [27.7172, 106.9271], [27.8, 106.5], [28.0, 106.2], [28.2, 105.9], [28.4, 105.8], [28.5081, 105.7975], [28.3, 105.2], [27.9, 104.5], [27.5, 103.2], [27.1564, 100.2562], [27.5, 100.0], [28.0, 101.0], [28.8, 101.8], [29.4333, 102.2167], [29.6, 102.25], [29.9428, 102.2956], [30.1, 102.4], [30.5, 102.6], [31.0, 102.5], [31.3, 102.45], [31.5543, 102.4531], [31.8, 102.8], [32.0, 103.0], [32.3, 103.4], [32.6047, 103.6553], [33.0, 104.0], [33.5, 104.5], [34.0, 105.0], [34.5, 105.5], [35.0, 106.0], [35.5, 106.5], [36.0, 107.0], [36.5, 107.5], [36.92785, 108.17611]],
                {"bubblingMouseEvents": true, "color": "#FFB6C1", "dashArray": null, "dashOffset": null, "fill": false, "fillColor": "#FFB6C1", "fillOpacity": 0.2, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "noClip": false, "opacity": 0.9, "smoothFactor": 1.0, "stroke": true, "weight": 4}
            ).addTo(map_1847de95be0bd1ebe87a3dd0366aead5);
        
    
        var popup_b5212822e9a6582cb2541d32288c86a1 = L.popup({
  "maxWidth": "100%",
});

        
            
                var html_df85880bd50d006e943f5bd7864cc84a = $(`<div id="html_df85880bd50d006e943f5bd7864cc84a" style="width: 100.0%; height: 100.0%;">红军长征（1934-1935）：从瑞金到吴起镇，翻雪山过草地的真实路径</div>`)[0];
                popup_b5212822e9a6582cb2541d32288c86a1.setContent(html_df85880bd50d006e943f5bd7864cc84a);
            
        

        poly_line_c1b8d57330be3143bab4a45f9badfeb0.bindPopup(popup_b5212822e9a6582cb2541d32288c86a1)
        ;

        
    
    
            poly_line_c1b8d57330be3143bab4a45f9badfeb0.bindTooltip(
                `<div>
                     红军长征真实路线
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            var marker_697e73f898ecce6ff0c749b1ac886726 = L.marker(
                [25.8856, 116.027],
                {
}
            ).addTo(map_1847de95be0bd1ebe87a3dd0366aead5);
        
    
            var div_icon_200c2ba96f29fd7f443f1507e0fc4ea7 = L.divIcon({
  "html": "\n    \u003cdiv style=\"text-align: center;\"\u003e\n        \u003cdiv style=\"\n            position: relative;\n            width: 40px;\n            height: 40px;\n            margin: 0 auto;\n        \"\u003e\n            \u003c!-- \u81ea\u5b9a\u4e49\u56fe\u6807 --\u003e\n            \u003cdiv style=\"\n                background-color: #d32f2f;\n                color: white;\n                width: 40px;\n                height: 40px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: 24px;\n                box-shadow: 0 0 10px rgba(211, 47, 47, 0.7);\n            \"\u003e\ud83c\udfee\u003c/div\u003e\n            \u003c!-- \u53f3\u4e0a\u89d2\u6570\u5b57 --\u003e\n            \u003cdiv style=\"\n                position: absolute;\n                top: -5px;\n                right: -5px;\n                background-color: #ffd700;\n                color: #d32f2f;\n                width: 20px;\n                height: 20px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-weight: bold;\n                font-size: 12px;\n                box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);\n            \"\u003e1\u003c/div\u003e\n        \u003c/div\u003e\n        \u003c!-- \u5220\u9664\u56fe\u6807\u4e0b\u65b9\u7684\u540d\u79f0\u6587\u672c --\u003e\n    \u003c/div\u003e",
  "className": "empty",
});
        
    
        var popup_cb58f43f5494b526d1f030c0cf9b8f58 = L.popup({
  "maxWidth": 300,
  "minWidth": 200,
});

        
            
                var html_dd2c3d1e4128ee710ff794e91b13ed1a = $(`<div id="html_dd2c3d1e4128ee710ff794e91b13ed1a" style="width: 100.0%; height: 100.0%;"><div style='font-size: 14px;'><strong>瑞金</strong><br>长征出发地<br><button onclick='openDetailsForNode(0)' style='margin-top: 10px; padding: 5px 10px; background-color: #d32f2f; color: white; border: none; border-radius: 4px; cursor: pointer;'>查看更多</button></div></div>`)[0];
                popup_cb58f43f5494b526d1f030c0cf9b8f58.setContent(html_dd2c3d1e4128ee710ff794e91b13ed1a);
            
        

        marker_697e73f898ecce6ff0c749b1ac886726.bindPopup(popup_cb58f43f5494b526d1f030c0cf9b8f58)
        ;

        
    
    
            marker_697e73f898ecce6ff0c749b1ac886726.bindTooltip(
                `<div>
                     1. 瑞金
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
                marker_697e73f898ecce6ff0c749b1ac886726.setIcon(div_icon_200c2ba96f29fd7f443f1507e0fc4ea7);
            
    
            var marker_9aa1fee5d34cd59f3d98f6969a02eef7 = L.marker(
                [25.9811, 115.4442],
                {
}
            ).addTo(map_1847de95be0bd1ebe87a3dd0366aead5);
        
    
            var div_icon_2c968a59948314e9f22d35b76b2de17b = L.divIcon({
  "html": "\n    \u003cdiv style=\"text-align: center;\"\u003e\n        \u003cdiv style=\"\n            position: relative;\n            width: 40px;\n            height: 40px;\n            margin: 0 auto;\n        \"\u003e\n            \u003c!-- \u81ea\u5b9a\u4e49\u56fe\u6807 --\u003e\n            \u003cdiv style=\"\n                background-color: #d32f2f;\n                color: white;\n                width: 40px;\n                height: 40px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: 24px;\n                box-shadow: 0 0 10px rgba(211, 47, 47, 0.7);\n            \"\u003e\ud83c\udfee\u003c/div\u003e\n            \u003c!-- \u53f3\u4e0a\u89d2\u6570\u5b57 --\u003e\n            \u003cdiv style=\"\n                position: absolute;\n                top: -5px;\n                right: -5px;\n                background-color: #ffd700;\n                color: #d32f2f;\n                width: 20px;\n                height: 20px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-weight: bold;\n                font-size: 12px;\n                box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);\n            \"\u003e2\u003c/div\u003e\n        \u003c/div\u003e\n        \u003c!-- \u5220\u9664\u56fe\u6807\u4e0b\u65b9\u7684\u540d\u79f0\u6587\u672c --\u003e\n    \u003c/div\u003e",
  "className": "empty",
});
        
    
        var popup_5c51ccb22ecc967b458d14715f2faaf6 = L.popup({
  "maxWidth": 300,
  "minWidth": 200,
});

        
            
                var html_4dd931dc9cced01af40477b6d8d8db5f = $(`<div id="html_4dd931dc9cced01af40477b6d8d8db5f" style="width: 100.0%; height: 100.0%;"><div style='font-size: 14px;'><strong>雩都</strong><br>于都河渡河<br><button onclick='openDetailsForNode(1)' style='margin-top: 10px; padding: 5px 10px; background-color: #d32f2f; color: white; border: none; border-radius: 4px; cursor: pointer;'>查看更多</button></div></div>`)[0];
                popup_5c51ccb22ecc967b458d14715f2faaf6.setContent(html_4dd931dc9cced01af40477b6d8d8db5f);
            
        

        marker_9aa1fee5d34cd59f3d98f6969a02eef7.bindPopup(popup_5c51ccb22ecc967b458d14715f2faaf6)
        ;

        
    
    
            marker_9aa1fee5d34cd59f3d98f6969a02eef7.bindTooltip(
                `<div>
                     2. 雩都
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
                marker_9aa1fee5d34cd59f3d98f6969a02eef7.setIcon(div_icon_2c968a59948314e9f22d35b76b2de17b);
            
    
            var marker_d1625438e86fba094710c0fee54cd8b0 = L.marker(
                [27.7172, 106.9271],
                {
}
            ).addTo(map_1847de95be0bd1ebe87a3dd0366aead5);
        
    
            var div_icon_d5ef82abd92cccd3175a2d2b2de754cf = L.divIcon({
  "html": "\n    \u003cdiv style=\"text-align: center;\"\u003e\n        \u003cdiv style=\"\n            position: relative;\n            width: 40px;\n            height: 40px;\n            margin: 0 auto;\n        \"\u003e\n            \u003c!-- \u81ea\u5b9a\u4e49\u56fe\u6807 --\u003e\n            \u003cdiv style=\"\n                background-color: #d32f2f;\n                color: white;\n                width: 40px;\n                height: 40px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: 24px;\n                box-shadow: 0 0 10px rgba(211, 47, 47, 0.7);\n            \"\u003e\ud83c\udfee\u003c/div\u003e\n            \u003c!-- \u53f3\u4e0a\u89d2\u6570\u5b57 --\u003e\n            \u003cdiv style=\"\n                position: absolute;\n                top: -5px;\n                right: -5px;\n                background-color: #ffd700;\n                color: #d32f2f;\n                width: 20px;\n                height: 20px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-weight: bold;\n                font-size: 12px;\n                box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);\n            \"\u003e3\u003c/div\u003e\n        \u003c/div\u003e\n        \u003c!-- \u5220\u9664\u56fe\u6807\u4e0b\u65b9\u7684\u540d\u79f0\u6587\u672c --\u003e\n    \u003c/div\u003e",
  "className": "empty",
});
        
    
        var popup_48942ed1e380eabc2caac37375381b5f = L.popup({
  "maxWidth": 300,
  "minWidth": 200,
});

        
            
                var html_3cccda9357366990174675c836ad2994 = $(`<div id="html_3cccda9357366990174675c836ad2994" style="width: 100.0%; height: 100.0%;"><div style='font-size: 14px;'><strong>遵义</strong><br>遵义会议召开地<br><button onclick='openDetailsForNode(2)' style='margin-top: 10px; padding: 5px 10px; background-color: #d32f2f; color: white; border: none; border-radius: 4px; cursor: pointer;'>查看更多</button></div></div>`)[0];
                popup_48942ed1e380eabc2caac37375381b5f.setContent(html_3cccda9357366990174675c836ad2994);
            
        

        marker_d1625438e86fba094710c0fee54cd8b0.bindPopup(popup_48942ed1e380eabc2caac37375381b5f)
        ;

        
    
    
            marker_d1625438e86fba094710c0fee54cd8b0.bindTooltip(
                `<div>
                     3. 遵义
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
                marker_d1625438e86fba094710c0fee54cd8b0.setIcon(div_icon_d5ef82abd92cccd3175a2d2b2de754cf);
            
    
            var marker_25ef4829ba4324f369fe09b7017b80f3 = L.marker(
                [28.5081, 105.7975],
                {
}
            ).addTo(map_1847de95be0bd1ebe87a3dd0366aead5);
        
    
            var div_icon_19b9a1a8a588dd343709d85b188c9fb0 = L.divIcon({
  "html": "\n    \u003cdiv style=\"text-align: center;\"\u003e\n        \u003cdiv style=\"\n            position: relative;\n            width: 40px;\n            height: 40px;\n            margin: 0 auto;\n        \"\u003e\n            \u003c!-- \u81ea\u5b9a\u4e49\u56fe\u6807 --\u003e\n            \u003cdiv style=\"\n                background-color: #d32f2f;\n                color: white;\n                width: 40px;\n                height: 40px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: 24px;\n                box-shadow: 0 0 10px rgba(211, 47, 47, 0.7);\n            \"\u003e\ud83c\udfee\u003c/div\u003e\n            \u003c!-- \u53f3\u4e0a\u89d2\u6570\u5b57 --\u003e\n            \u003cdiv style=\"\n                position: absolute;\n                top: -5px;\n                right: -5px;\n                background-color: #ffd700;\n                color: #d32f2f;\n                width: 20px;\n                height: 20px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-weight: bold;\n                font-size: 12px;\n                box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);\n            \"\u003e4\u003c/div\u003e\n        \u003c/div\u003e\n        \u003c!-- \u5220\u9664\u56fe\u6807\u4e0b\u65b9\u7684\u540d\u79f0\u6587\u672c --\u003e\n    \u003c/div\u003e",
  "className": "empty",
});
        
    
        var popup_fcd247be0222f61fa421a4d6597c302b = L.popup({
  "maxWidth": 300,
  "minWidth": 200,
});

        
            
                var html_ed1fb3ff139f317855b9b0d0376c616b = $(`<div id="html_ed1fb3ff139f317855b9b0d0376c616b" style="width: 100.0%; height: 100.0%;"><div style='font-size: 14px;'><strong>赤水</strong><br>四渡赤水<br><button onclick='openDetailsForNode(3)' style='margin-top: 10px; padding: 5px 10px; background-color: #d32f2f; color: white; border: none; border-radius: 4px; cursor: pointer;'>查看更多</button></div></div>`)[0];
                popup_fcd247be0222f61fa421a4d6597c302b.setContent(html_ed1fb3ff139f317855b9b0d0376c616b);
            
        

        marker_25ef4829ba4324f369fe09b7017b80f3.bindPopup(popup_fcd247be0222f61fa421a4d6597c302b)
        ;

        
    
    
            marker_25ef4829ba4324f369fe09b7017b80f3.bindTooltip(
                `<div>
                     4. 赤水
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
                marker_25ef4829ba4324f369fe09b7017b80f3.setIcon(div_icon_19b9a1a8a588dd343709d85b188c9fb0);
            
    
            var marker_d2a58adc859a922718973d147493afdb = L.marker(
                [27.1564, 100.2562],
                {
}
            ).addTo(map_1847de95be0bd1ebe87a3dd0366aead5);
        
    
            var div_icon_7b160293a8a2a1a3a45c5ca01ec5ffb4 = L.divIcon({
  "html": "\n    \u003cdiv style=\"text-align: center;\"\u003e\n        \u003cdiv style=\"\n            position: relative;\n            width: 40px;\n            height: 40px;\n            margin: 0 auto;\n        \"\u003e\n            \u003c!-- \u81ea\u5b9a\u4e49\u56fe\u6807 --\u003e\n            \u003cdiv style=\"\n                background-color: #d32f2f;\n                color: white;\n                width: 40px;\n                height: 40px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: 24px;\n                box-shadow: 0 0 10px rgba(211, 47, 47, 0.7);\n            \"\u003e\ud83c\udfee\u003c/div\u003e\n            \u003c!-- \u53f3\u4e0a\u89d2\u6570\u5b57 --\u003e\n            \u003cdiv style=\"\n                position: absolute;\n                top: -5px;\n                right: -5px;\n                background-color: #ffd700;\n                color: #d32f2f;\n                width: 20px;\n                height: 20px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-weight: bold;\n                font-size: 12px;\n                box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);\n            \"\u003e5\u003c/div\u003e\n        \u003c/div\u003e\n        \u003c!-- \u5220\u9664\u56fe\u6807\u4e0b\u65b9\u7684\u540d\u79f0\u6587\u672c --\u003e\n    \u003c/div\u003e",
  "className": "empty",
});
        
    
        var popup_c336edc0640fefe664c8d874a604105a = L.popup({
  "maxWidth": 300,
  "minWidth": 200,
});

        
            
                var html_af9f3c9b41165873c1738f4d1f068e3a = $(`<div id="html_af9f3c9b41165873c1738f4d1f068e3a" style="width: 100.0%; height: 100.0%;"><div style='font-size: 14px;'><strong>金沙江</strong><br>巧渡金沙江<br><button onclick='openDetailsForNode(4)' style='margin-top: 10px; padding: 5px 10px; background-color: #d32f2f; color: white; border: none; border-radius: 4px; cursor: pointer;'>查看更多</button></div></div>`)[0];
                popup_c336edc0640fefe664c8d874a604105a.setContent(html_af9f3c9b41165873c1738f4d1f068e3a);
            
        

        marker_d2a58adc859a922718973d147493afdb.bindPopup(popup_c336edc0640fefe664c8d874a604105a)
        ;

        
    
    
            marker_d2a58adc859a922718973d147493afdb.bindTooltip(
                `<div>
                     5. 金沙江
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
                marker_d2a58adc859a922718973d147493afdb.setIcon(div_icon_7b160293a8a2a1a3a45c5ca01ec5ffb4);
            
    
            var marker_85a2c7971ba3ebb846d809b010a552f7 = L.marker(
                [29.4333, 102.2167],
                {
}
            ).addTo(map_1847de95be0bd1ebe87a3dd0366aead5);
        
    
            var div_icon_4f10bfd15fbbe4136ad61628ce49b987 = L.divIcon({
  "html": "\n    \u003cdiv style=\"text-align: center;\"\u003e\n        \u003cdiv style=\"\n            position: relative;\n            width: 40px;\n            height: 40px;\n            margin: 0 auto;\n        \"\u003e\n            \u003c!-- \u81ea\u5b9a\u4e49\u56fe\u6807 --\u003e\n            \u003cdiv style=\"\n                background-color: #d32f2f;\n                color: white;\n                width: 40px;\n                height: 40px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: 24px;\n                box-shadow: 0 0 10px rgba(211, 47, 47, 0.7);\n            \"\u003e\ud83c\udfee\u003c/div\u003e\n            \u003c!-- \u53f3\u4e0a\u89d2\u6570\u5b57 --\u003e\n            \u003cdiv style=\"\n                position: absolute;\n                top: -5px;\n                right: -5px;\n                background-color: #ffd700;\n                color: #d32f2f;\n                width: 20px;\n                height: 20px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-weight: bold;\n                font-size: 12px;\n                box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);\n            \"\u003e6\u003c/div\u003e\n        \u003c/div\u003e\n        \u003c!-- \u5220\u9664\u56fe\u6807\u4e0b\u65b9\u7684\u540d\u79f0\u6587\u672c --\u003e\n    \u003c/div\u003e",
  "className": "empty",
});
        
    
        var popup_5692f4b804b544e59006dee9cc431113 = L.popup({
  "maxWidth": 300,
  "minWidth": 200,
});

        
            
                var html_6be85b2b7f05eccf3a8ba31de8dea810 = $(`<div id="html_6be85b2b7f05eccf3a8ba31de8dea810" style="width: 100.0%; height: 100.0%;"><div style='font-size: 14px;'><strong>大渡河</strong><br>强渡大渡河<br><button onclick='openDetailsForNode(5)' style='margin-top: 10px; padding: 5px 10px; background-color: #d32f2f; color: white; border: none; border-radius: 4px; cursor: pointer;'>查看更多</button></div></div>`)[0];
                popup_5692f4b804b544e59006dee9cc431113.setContent(html_6be85b2b7f05eccf3a8ba31de8dea810);
            
        

        marker_85a2c7971ba3ebb846d809b010a552f7.bindPopup(popup_5692f4b804b544e59006dee9cc431113)
        ;

        
    
    
            marker_85a2c7971ba3ebb846d809b010a552f7.bindTooltip(
                `<div>
                     6. 大渡河
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
                marker_85a2c7971ba3ebb846d809b010a552f7.setIcon(div_icon_4f10bfd15fbbe4136ad61628ce49b987);
            
    
            var marker_caefbe25bbf8215f4ebdfe2dcc702ee9 = L.marker(
                [29.9428, 102.2956],
                {
}
            ).addTo(map_1847de95be0bd1ebe87a3dd0366aead5);
        
    
            var div_icon_7dd7c6229b048278b53d774b043694df = L.divIcon({
  "html": "\n    \u003cdiv style=\"text-align: center;\"\u003e\n        \u003cdiv style=\"\n            position: relative;\n            width: 40px;\n            height: 40px;\n            margin: 0 auto;\n        \"\u003e\n            \u003c!-- \u81ea\u5b9a\u4e49\u56fe\u6807 --\u003e\n            \u003cdiv style=\"\n                background-color: #d32f2f;\n                color: white;\n                width: 40px;\n                height: 40px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: 24px;\n                box-shadow: 0 0 10px rgba(211, 47, 47, 0.7);\n            \"\u003e\ud83c\udfee\u003c/div\u003e\n            \u003c!-- \u53f3\u4e0a\u89d2\u6570\u5b57 --\u003e\n            \u003cdiv style=\"\n                position: absolute;\n                top: -5px;\n                right: -5px;\n                background-color: #ffd700;\n                color: #d32f2f;\n                width: 20px;\n                height: 20px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-weight: bold;\n                font-size: 12px;\n                box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);\n            \"\u003e7\u003c/div\u003e\n        \u003c/div\u003e\n        \u003c!-- \u5220\u9664\u56fe\u6807\u4e0b\u65b9\u7684\u540d\u79f0\u6587\u672c --\u003e\n    \u003c/div\u003e",
  "className": "empty",
});
        
    
        var popup_c07921b9dc8a91515cddeb8980b5a4c6 = L.popup({
  "maxWidth": 300,
  "minWidth": 200,
});

        
            
                var html_06aeec17b1650dbed25c96b99cbf3093 = $(`<div id="html_06aeec17b1650dbed25c96b99cbf3093" style="width: 100.0%; height: 100.0%;"><div style='font-size: 14px;'><strong>泸定桥</strong><br>飞夺泸定桥<br><button onclick='openDetailsForNode(6)' style='margin-top: 10px; padding: 5px 10px; background-color: #d32f2f; color: white; border: none; border-radius: 4px; cursor: pointer;'>查看更多</button></div></div>`)[0];
                popup_c07921b9dc8a91515cddeb8980b5a4c6.setContent(html_06aeec17b1650dbed25c96b99cbf3093);
            
        

        marker_caefbe25bbf8215f4ebdfe2dcc702ee9.bindPopup(popup_c07921b9dc8a91515cddeb8980b5a4c6)
        ;

        
    
    
            marker_caefbe25bbf8215f4ebdfe2dcc702ee9.bindTooltip(
                `<div>
                     7. 泸定桥
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
                marker_caefbe25bbf8215f4ebdfe2dcc702ee9.setIcon(div_icon_7dd7c6229b048278b53d774b043694df);
            
    
            var marker_28c9679359d62bd2c0eb2d57cab9c704 = L.marker(
                [30.5, 102.6],
                {
}
            ).addTo(map_1847de95be0bd1ebe87a3dd0366aead5);
        
    
            var div_icon_3614beb72aa579d1b4df582050c81921 = L.divIcon({
  "html": "\n    \u003cdiv style=\"text-align: center;\"\u003e\n        \u003cdiv style=\"\n            position: relative;\n            width: 40px;\n            height: 40px;\n            margin: 0 auto;\n        \"\u003e\n            \u003c!-- \u81ea\u5b9a\u4e49\u56fe\u6807 --\u003e\n            \u003cdiv style=\"\n                background-color: #d32f2f;\n                color: white;\n                width: 40px;\n                height: 40px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: 24px;\n                box-shadow: 0 0 10px rgba(211, 47, 47, 0.7);\n            \"\u003e\ud83c\udfee\u003c/div\u003e\n            \u003c!-- \u53f3\u4e0a\u89d2\u6570\u5b57 --\u003e\n            \u003cdiv style=\"\n                position: absolute;\n                top: -5px;\n                right: -5px;\n                background-color: #ffd700;\n                color: #d32f2f;\n                width: 20px;\n                height: 20px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-weight: bold;\n                font-size: 12px;\n                box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);\n            \"\u003e8\u003c/div\u003e\n        \u003c/div\u003e\n        \u003c!-- \u5220\u9664\u56fe\u6807\u4e0b\u65b9\u7684\u540d\u79f0\u6587\u672c --\u003e\n    \u003c/div\u003e",
  "className": "empty",
});
        
    
        var popup_2cca6f7d266620362c0236dabd2e75a2 = L.popup({
  "maxWidth": 300,
  "minWidth": 200,
});

        
            
                var html_a22fc87042e268cd2e086cc0759c757c = $(`<div id="html_a22fc87042e268cd2e086cc0759c757c" style="width: 100.0%; height: 100.0%;"><div style='font-size: 14px;'><strong>夹金山</strong><br>翻越夹金山<br><button onclick='openDetailsForNode(7)' style='margin-top: 10px; padding: 5px 10px; background-color: #d32f2f; color: white; border: none; border-radius: 4px; cursor: pointer;'>查看更多</button></div></div>`)[0];
                popup_2cca6f7d266620362c0236dabd2e75a2.setContent(html_a22fc87042e268cd2e086cc0759c757c);
            
        

        marker_28c9679359d62bd2c0eb2d57cab9c704.bindPopup(popup_2cca6f7d266620362c0236dabd2e75a2)
        ;

        
    
    
            marker_28c9679359d62bd2c0eb2d57cab9c704.bindTooltip(
                `<div>
                     8. 夹金山
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
                marker_28c9679359d62bd2c0eb2d57cab9c704.setIcon(div_icon_3614beb72aa579d1b4df582050c81921);
            
    
            var marker_f2e5ad15d2ce89d1d059fbafa368fe00 = L.marker(
                [31.5543, 102.4531],
                {
}
            ).addTo(map_1847de95be0bd1ebe87a3dd0366aead5);
        
    
            var div_icon_685463fa5d813390831a830da30d7a60 = L.divIcon({
  "html": "\n    \u003cdiv style=\"text-align: center;\"\u003e\n        \u003cdiv style=\"\n            position: relative;\n            width: 40px;\n            height: 40px;\n            margin: 0 auto;\n        \"\u003e\n            \u003c!-- \u81ea\u5b9a\u4e49\u56fe\u6807 --\u003e\n            \u003cdiv style=\"\n                background-color: #d32f2f;\n                color: white;\n                width: 40px;\n                height: 40px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: 24px;\n                box-shadow: 0 0 10px rgba(211, 47, 47, 0.7);\n            \"\u003e\ud83c\udfee\u003c/div\u003e\n            \u003c!-- \u53f3\u4e0a\u89d2\u6570\u5b57 --\u003e\n            \u003cdiv style=\"\n                position: absolute;\n                top: -5px;\n                right: -5px;\n                background-color: #ffd700;\n                color: #d32f2f;\n                width: 20px;\n                height: 20px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-weight: bold;\n                font-size: 12px;\n                box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);\n            \"\u003e9\u003c/div\u003e\n        \u003c/div\u003e\n        \u003c!-- \u5220\u9664\u56fe\u6807\u4e0b\u65b9\u7684\u540d\u79f0\u6587\u672c --\u003e\n    \u003c/div\u003e",
  "className": "empty",
});
        
    
        var popup_81726c2640e910cee5f1e9cc45a79742 = L.popup({
  "maxWidth": 300,
  "minWidth": 200,
});

        
            
                var html_de1118615f586f45ea5d9041b7966d77 = $(`<div id="html_de1118615f586f45ea5d9041b7966d77" style="width: 100.0%; height: 100.0%;"><div style='font-size: 14px;'><strong>懋功</strong><br>与红四方面军会师<br><button onclick='openDetailsForNode(8)' style='margin-top: 10px; padding: 5px 10px; background-color: #d32f2f; color: white; border: none; border-radius: 4px; cursor: pointer;'>查看更多</button></div></div>`)[0];
                popup_81726c2640e910cee5f1e9cc45a79742.setContent(html_de1118615f586f45ea5d9041b7966d77);
            
        

        marker_f2e5ad15d2ce89d1d059fbafa368fe00.bindPopup(popup_81726c2640e910cee5f1e9cc45a79742)
        ;

        
    
    
            marker_f2e5ad15d2ce89d1d059fbafa368fe00.bindTooltip(
                `<div>
                     9. 懋功
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
                marker_f2e5ad15d2ce89d1d059fbafa368fe00.setIcon(div_icon_685463fa5d813390831a830da30d7a60);
            
    
            var marker_c94c939cc441828232b51951a8200b96 = L.marker(
                [32.6047, 103.6553],
                {
}
            ).addTo(map_1847de95be0bd1ebe87a3dd0366aead5);
        
    
            var div_icon_ea55d0f18a06958862120ac11cc83c0a = L.divIcon({
  "html": "\n    \u003cdiv style=\"text-align: center;\"\u003e\n        \u003cdiv style=\"\n            position: relative;\n            width: 40px;\n            height: 40px;\n            margin: 0 auto;\n        \"\u003e\n            \u003c!-- \u81ea\u5b9a\u4e49\u56fe\u6807 --\u003e\n            \u003cdiv style=\"\n                background-color: #d32f2f;\n                color: white;\n                width: 40px;\n                height: 40px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: 24px;\n                box-shadow: 0 0 10px rgba(211, 47, 47, 0.7);\n            \"\u003e\ud83c\udfee\u003c/div\u003e\n            \u003c!-- \u53f3\u4e0a\u89d2\u6570\u5b57 --\u003e\n            \u003cdiv style=\"\n                position: absolute;\n                top: -5px;\n                right: -5px;\n                background-color: #ffd700;\n                color: #d32f2f;\n                width: 20px;\n                height: 20px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-weight: bold;\n                font-size: 12px;\n                box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);\n            \"\u003e10\u003c/div\u003e\n        \u003c/div\u003e\n        \u003c!-- \u5220\u9664\u56fe\u6807\u4e0b\u65b9\u7684\u540d\u79f0\u6587\u672c --\u003e\n    \u003c/div\u003e",
  "className": "empty",
});
        
    
        var popup_4d432b334cc0b4c7bf72a00c90be627e = L.popup({
  "maxWidth": 300,
  "minWidth": 200,
});

        
            
                var html_8d1573578b5f42a6b5cd31143d2982ee = $(`<div id="html_8d1573578b5f42a6b5cd31143d2982ee" style="width: 100.0%; height: 100.0%;"><div style='font-size: 14px;'><strong>松潘草地</strong><br>过草地<br><button onclick='openDetailsForNode(9)' style='margin-top: 10px; padding: 5px 10px; background-color: #d32f2f; color: white; border: none; border-radius: 4px; cursor: pointer;'>查看更多</button></div></div>`)[0];
                popup_4d432b334cc0b4c7bf72a00c90be627e.setContent(html_8d1573578b5f42a6b5cd31143d2982ee);
            
        

        marker_c94c939cc441828232b51951a8200b96.bindPopup(popup_4d432b334cc0b4c7bf72a00c90be627e)
        ;

        
    
    
            marker_c94c939cc441828232b51951a8200b96.bindTooltip(
                `<div>
                     10. 松潘草地
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
                marker_c94c939cc441828232b51951a8200b96.setIcon(div_icon_ea55d0f18a06958862120ac11cc83c0a);
            
    
            var marker_93a90a6cfbd44d047ffd4ae4d4977aeb = L.marker(
                [36.92785, 108.17611],
                {
}
            ).addTo(map_1847de95be0bd1ebe87a3dd0366aead5);
        
    
            var div_icon_362a57e074392f8f4996109d5eaf46ab = L.divIcon({
  "html": "\n    \u003cdiv style=\"text-align: center;\"\u003e\n        \u003cdiv style=\"\n            position: relative;\n            width: 40px;\n            height: 40px;\n            margin: 0 auto;\n        \"\u003e\n            \u003c!-- \u81ea\u5b9a\u4e49\u56fe\u6807 --\u003e\n            \u003cdiv style=\"\n                background-color: #d32f2f;\n                color: white;\n                width: 40px;\n                height: 40px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: 24px;\n                box-shadow: 0 0 10px rgba(211, 47, 47, 0.7);\n            \"\u003e\ud83c\udfee\u003c/div\u003e\n            \u003c!-- \u53f3\u4e0a\u89d2\u6570\u5b57 --\u003e\n            \u003cdiv style=\"\n                position: absolute;\n                top: -5px;\n                right: -5px;\n                background-color: #ffd700;\n                color: #d32f2f;\n                width: 20px;\n                height: 20px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-weight: bold;\n                font-size: 12px;\n                box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);\n            \"\u003e11\u003c/div\u003e\n        \u003c/div\u003e\n        \u003c!-- \u5220\u9664\u56fe\u6807\u4e0b\u65b9\u7684\u540d\u79f0\u6587\u672c --\u003e\n    \u003c/div\u003e",
  "className": "empty",
});
        
    
        var popup_3a7fb58ff09eb54e4fa00d9fdff3c435 = L.popup({
  "maxWidth": 300,
  "minWidth": 200,
});

        
            
                var html_a0f1c74d2392bd7ef683f004786d6467 = $(`<div id="html_a0f1c74d2392bd7ef683f004786d6467" style="width: 100.0%; height: 100.0%;"><div style='font-size: 14px;'><strong>吴起镇</strong><br>长征终点<br><button onclick='openDetailsForNode(10)' style='margin-top: 10px; padding: 5px 10px; background-color: #d32f2f; color: white; border: none; border-radius: 4px; cursor: pointer;'>查看更多</button></div></div>`)[0];
                popup_3a7fb58ff09eb54e4fa00d9fdff3c435.setContent(html_a0f1c74d2392bd7ef683f004786d6467);
            
        

        marker_93a90a6cfbd44d047ffd4ae4d4977aeb.bindPopup(popup_3a7fb58ff09eb54e4fa00d9fdff3c435)
        ;

        
    
    
            marker_93a90a6cfbd44d047ffd4ae4d4977aeb.bindTooltip(
                `<div>
                     11. 吴起镇
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
                marker_93a90a6cfbd44d047ffd4ae4d4977aeb.setIcon(div_icon_362a57e074392f8f4996109d5eaf46ab);
            
    
            var layer_control_97da48e6720aee56e83bfb4deee575b0_layers = {
                base_layers : {
                    "openstreetmap" : tile_layer_db4be76dac93890fd37dfe74b927defb,
                },
                overlays :  {
                },
            };
            let layer_control_97da48e6720aee56e83bfb4deee575b0 = L.control.layers(
                layer_control_97da48e6720aee56e83bfb4deee575b0_layers.base_layers,
                layer_control_97da48e6720aee56e83bfb4deee575b0_layers.overlays,
                {
  "position": "topright",
  "collapsed": true,
  "autoZIndex": true,
}
            ).addTo(map_1847de95be0bd1ebe87a3dd0366aead5);

        
</script>
</html>